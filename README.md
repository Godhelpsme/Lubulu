# Lubulu - å¥åº·å†³ç­–è½®ç›˜ ğŸ¯

[![Version](https://img.shields.io/badge/Version-2.1.0-brightgreen)](https://github.com/Godhelpsme/Lubulu)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![PWA](https://img.shields.io/badge/PWA-Ready-purple)](https://web.dev/progressive-web-apps/)
[![Cloudflare](https://img.shields.io/badge/Cloudflare-Workers%20%26%20Pages-orange)](https://www.cloudflare.com/)

> ä¸€ä¸ªç®€æ´ä¼˜é›…çš„å¥åº·å†³ç­–å·¥å…·ï¼Œé€šè¿‡è½¬ç›˜æŠ½å–å¸®åŠ©ä½ åœ¨é¢ä¸´è¯±æƒ‘æ—¶åšå‡ºæ˜æ™ºé€‰æ‹©ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

### ğŸ² æ ¸å¿ƒåŠŸèƒ½
- **æ™ºèƒ½è½®ç›˜**: æ”¯æŒè‡ªå®šä¹‰æ¦‚ç‡(1-98%)ï¼Œä½¿ç”¨ Web Crypto API ä¿è¯çœŸéšæœºæ€§
- **å†å²è®°å½•**: æ—¥å†å½¢å¼è¿½è¸ªæ¯æ—¥å†³ç­–ï¼Œæ”¯æŒç¼–è¾‘å’Œåˆ é™¤å†å²è®°å½•
- **æ•°æ®ç»Ÿè®¡**: å®æ—¶ç»Ÿè®¡åˆ†æï¼Œè®¡ç®—å¥åº·é€‰æ‹©æ¯”ä¾‹å’Œè¶‹åŠ¿
- **ä¿åº•æœºåˆ¶**: å¯è®¾ç½®è¿ç»­Nå¤©ä¸Luåå¿…å®šè§¦å‘Luç»“æœ
- **å¤šç§æ¨¡å¼**: å•æ¬¡æ¨¡å¼(æ¯æ—¥ä¸€æ¬¡)æˆ–å¤šæ¬¡æ¨¡å¼(æ— é™åˆ¶)

### ğŸ’ ç”¨æˆ·ç³»ç»Ÿ
- **è´¦æˆ·ç™»å½•**: å®Œæ•´çš„æ³¨å†Œ/ç™»å½•ç³»ç»Ÿï¼Œæ•°æ®äº‘ç«¯åŒæ­¥
- **æ¸¸å®¢æ¨¡å¼**: æ— éœ€æ³¨å†Œå³å¯ä½¿ç”¨ï¼Œæ•°æ®æœ¬åœ°å­˜å‚¨
- **æ•°æ®è¿ç§»**: æ¸¸å®¢æ•°æ®å¯ä¸€é”®è¿ç§»åˆ°æ­£å¼è´¦æˆ·
- **æ™ºèƒ½åˆå¹¶**: å¤šè®¾å¤‡æ•°æ®æ™ºèƒ½å†²çªè§£å†³

### ğŸš€ æŠ€æœ¯äº®ç‚¹
- **PWA æ”¯æŒ**: å¯ç¦»çº¿ä½¿ç”¨ï¼Œæ”¯æŒå®‰è£…åˆ°æ¡Œé¢/ä¸»å±å¹•
- **æè‡´æ€§èƒ½**: 100å€ Canvas æ¸²æŸ“ä¼˜åŒ–ï¼Œ60fps æµç•…åŠ¨ç”»
- **ä¼˜é›…é™çº§**: API ä¸å¯ç”¨æ—¶è‡ªåŠ¨åˆ‡æ¢æœ¬åœ°æ¨¡å¼
- **å…¨çƒåŠ é€Ÿ**: Cloudflare Edge Networkï¼Œå…¨çƒä½å»¶è¿Ÿ
- **æ•°æ®å®‰å…¨**: æœ¬åœ°å­˜å‚¨ + äº‘ç«¯å¤‡ä»½ï¼Œæ”¯æŒæ•°æ®å¯¼å…¥å¯¼å‡º

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æ¶æ„
```
Cloudflare Pages (å…¨çƒ CDN)
â”œâ”€â”€ HTML5 + CSS3 + ES6 JavaScript
â”œâ”€â”€ ES6 Modules (æ¨¡å—åŒ–è®¾è®¡)
â”œâ”€â”€ Canvas API (ç¦»å±ç¼“å­˜ä¼˜åŒ–)
â”œâ”€â”€ Service Worker (ç¦»çº¿æ”¯æŒ)
â””â”€â”€ Vite (æ„å»ºå·¥å…·)
```

### åç«¯æ¶æ„
```
Cloudflare Workers (Edge Computing)
â”œâ”€â”€ RESTful API (11ä¸ªç«¯ç‚¹)
â”œâ”€â”€ JWT è®¤è¯ (30å¤©æœ‰æ•ˆæœŸ)
â”œâ”€â”€ D1 Database (SQL æ•°æ®åº“)
â””â”€â”€ Web Crypto API (å¯†ç å“ˆå¸Œ)
```

### æŠ€æœ¯æ ˆè¯¦æƒ…

| å±‚çº§ | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| å‰ç«¯æ¡†æ¶ | Vanilla JS | è½»é‡çº§ï¼Œæ— æ¡†æ¶ä¾èµ– |
| æ„å»ºå·¥å…· | Vite 5.0 | å¿«é€Ÿçƒ­æ›´æ–°ï¼Œä¼˜åŒ–æ„å»º |
| å‰ç«¯éƒ¨ç½² | Cloudflare Pages | å…¨çƒ CDNï¼Œè‡ªåŠ¨ HTTPS |
| åç«¯è¿è¡Œæ—¶ | Cloudflare Workers | Edge Computing |
| æ•°æ®åº“ | Cloudflare D1 | SQLiteï¼Œåˆ†å¸ƒå¼ |
| è®¤è¯æ–¹å¼ | JWT | æ— çŠ¶æ€ä»¤ç‰Œ |
| ç¼“å­˜ç­–ç•¥ | Service Worker + Cache API | ç¦»çº¿ä¼˜å…ˆ |
| æ ·å¼æ–¹æ¡ˆ | CSS3 (Glass morphism) | ç°ä»£åŒ– UI |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åœ¨çº¿ä½¿ç”¨

ç›´æ¥è®¿é—®ï¼š**[lubulu.app](https://lubulu.app)**ï¼ˆéœ€è¦å…ˆéƒ¨ç½²ï¼‰

### æœ¬åœ°å¼€å‘

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/Godhelpsme/Lubulu.git
cd Lubulu

# 2. å®‰è£…ä¾èµ–
npm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 4. æ‰“å¼€æµè§ˆå™¨è®¿é—®
# http://localhost:3000
```

### åç«¯ API å¼€å‘

```bash
# 1. è¿›å…¥ API ç›®å½•
cd workers/api

# 2. å®‰è£…ä¾èµ–
npm install

# 3. å¯åŠ¨æœ¬åœ° Workers
npm run dev

# 4. API è¿è¡Œåœ¨
# http://localhost:8787
```

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

### å‰ç«¯éƒ¨ç½² (Cloudflare Pages)

#### æ–¹æ³• 1: GitHub è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. æ¨é€ä»£ç åˆ° GitHub
2. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
3. Pages â†’ Create a project â†’ Connect to Git
4. é€‰æ‹©ä»“åº“å¹¶é…ç½®ï¼š
   ```
   æ„å»ºå‘½ä»¤: npm run build
   æ„å»ºè¾“å‡º: dist
   ç¯å¢ƒå˜é‡: VITE_API_URL=https://api.lubulu.app
   ```

#### æ–¹æ³• 2: Wrangler CLI éƒ¨ç½²

```bash
npm run build
npm run pages:deploy
```

### åç«¯éƒ¨ç½² (Cloudflare Workers)

```bash
# 1. åˆ›å»º D1 æ•°æ®åº“
cd workers/api
wrangler d1 create lubulu-db

# 2. æ›´æ–° wrangler.toml ä¸­çš„ database_id

# 3. åˆå§‹åŒ–æ•°æ®åº“
wrangler d1 execute lubulu-db --file=schema.sql

# 4. è®¾ç½® JWT å¯†é’¥
wrangler secret put JWT_SECRET

# 5. éƒ¨ç½²
npm run deploy
```

è¯¦ç»†éƒ¨ç½²æ–‡æ¡£ï¼š[DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md)

## ğŸ“– ä½¿ç”¨è¯´æ˜

### åŸºç¡€ä½¿ç”¨

1. **è®¾ç½®æ¦‚ç‡**
   - ç‚¹å‡»å³ä¸Šè§’è®¾ç½®æŒ‰é’®
   - è°ƒæ•´"Lu"çš„æ¦‚ç‡ (1-98%)
   - è®¾ç½®ä¿åº•å¤©æ•°ï¼ˆå¯é€‰ï¼‰
   - é€‰æ‹©å•æ¬¡/å¤šæ¬¡æ¨¡å¼

2. **è½¬åŠ¨è½®ç›˜**
   - ç‚¹å‡» SPIN æŒ‰é’®å¼€å§‹è½¬åŠ¨
   - ç­‰å¾…è½®ç›˜åœæ­¢æ˜¾ç¤ºç»“æœ
   - å¦‚æœæ˜¯"Lu"ç»“æœï¼Œå¯é€‰æ‹©æœ€ç»ˆå†³å®š

3. **æŸ¥çœ‹å†å²**
   - æ—¥å†æ˜¾ç¤ºæ¯æ—¥æŠ½å–è®°å½•
   - ç‚¹å‡»æ—¥æœŸå¯ç¼–è¾‘æˆ–åˆ é™¤è®°å½•
   - ç»¿è‰²=ä¸Luï¼Œçº¢è‰²=Lu

4. **æ•°æ®ç®¡ç†**
   - æ”¯æŒå¯¼å‡ºä¸º JSON æ–‡ä»¶
   - æ”¯æŒå¯¼å…¥å¤‡ä»½æ•°æ®
   - æ¸¸å®¢æ•°æ®å¯è¿ç§»åˆ°è´¦æˆ·

### é«˜çº§åŠŸèƒ½

#### ä¿åº•æœºåˆ¶
è®¾ç½®"è¿ç»­Nå¤©ä¸Luåè§¦å‘ä¿åº•"ï¼Œç¡®ä¿ä¸ä¼šå¤ªä¹…æ²¡æœ‰Luçš„ç»“æœã€‚

#### æ¸¸å®¢æ¨¡å¼
æ— éœ€æ³¨å†Œå³å¯ä½¿ç”¨ï¼Œæ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ã€‚ç™»å½•åå¯ä¸€é”®è¿ç§»æ•°æ®ã€‚

#### ç¦»çº¿ä½¿ç”¨
å®‰è£…ä¸º PWA åï¼Œå®Œå…¨æ”¯æŒç¦»çº¿ä½¿ç”¨ï¼Œæ•°æ®æœ¬åœ°å­˜å‚¨ã€‚

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
Lubulu/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ api/              # API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â””â”€â”€ api-client.js
â”‚   â”‚   â”œâ”€â”€ auth/             # è®¤è¯æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ auth-enhanced.js
â”‚   â”‚   â”œâ”€â”€ core/             # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ roulette-enhanced.js  # è½®ç›˜ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ calendar.js           # æ—¥å†ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ statistics.js         # ç»Ÿè®¡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ storage/          # å­˜å‚¨ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ storage-manager.js
â”‚   â”‚   â”œâ”€â”€ ui/               # UI ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ ui-manager.js
â”‚   â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â””â”€â”€ helpers.js
â”‚   â”‚   â””â”€â”€ main.js           # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ css/                  # æ ·å¼æ–‡ä»¶
â”‚       â”œâ”€â”€ base.css
â”‚       â”œâ”€â”€ components.css
â”‚       â”œâ”€â”€ forms.css
â”‚       â””â”€â”€ responsive.css
â”œâ”€â”€ workers/
â”‚   â””â”€â”€ api/                  # Cloudflare Workers API
â”‚       â”œâ”€â”€ index.js          # ä¸»è·¯ç”±
â”‚       â”œâ”€â”€ auth-utils.js     # è®¤è¯å·¥å…·
â”‚       â”œâ”€â”€ cors.js           # CORS é…ç½®
â”‚       â”œâ”€â”€ schema.sql        # æ•°æ®åº“æ¶æ„
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ wrangler.toml
â”œâ”€â”€ index.html                # ä¸»é¡µé¢
â”œâ”€â”€ manifest.json             # PWA é…ç½®
â”œâ”€â”€ sw.js                     # Service Worker
â”œâ”€â”€ vite.config.js            # Vite é…ç½®
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

### æ ¸å¿ƒæ¨¡å—è¯´æ˜

#### RouletteManager
å¤„ç†è½¬ç›˜æ¸²æŸ“ã€åŠ¨ç”»å’Œç»“æœè®¡ç®—ã€‚ä½¿ç”¨ç¦»å± Canvas ç¼“å­˜ä¼˜åŒ–æ€§èƒ½ã€‚

```javascript
const roulette = new RouletteManager(canvas);
roulette.updateConfig(30); // è®¾ç½®30% Luæ¦‚ç‡
const result = await roulette.spin(); // æ‰§è¡ŒæŠ½å–
```

#### ApiClient
ç»Ÿä¸€çš„ API å®¢æˆ·ç«¯ï¼Œè‡ªåŠ¨å¤„ç†å¥åº·æ£€æŸ¥ã€è¶…æ—¶ã€é‡è¯•å’Œé™çº§ã€‚

```javascript
const result = await apiClient.login({ username, password });
// è‡ªåŠ¨å¤„ç†ç½‘ç»œé—®é¢˜å’Œé™çº§
```

#### StorageManager
ç»Ÿä¸€çš„å­˜å‚¨ç®¡ç†ï¼Œæ”¯æŒæœ¬åœ°å­˜å‚¨å’Œäº‘ç«¯åŒæ­¥ã€‚

```javascript
await storage.saveSettings(settings);
const history = await storage.getHistory();
```

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨å¯¹åº”æ¨¡å—åˆ›å»ºæ–°ç±»/å‡½æ•°
2. åœ¨ `main.js` ä¸­å¼•å…¥å’Œåˆå§‹åŒ–
3. æ›´æ–°ç›¸å…³ UI ç»„ä»¶
4. æ·»åŠ æµ‹è¯•ç”¨ä¾‹ï¼ˆæ¨èï¼‰

### ä»£ç è§„èŒƒ

```bash
# ESLint æ£€æŸ¥
npm run lint

# Prettier æ ¼å¼åŒ–
npm run format
```

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
npm run test

# æµ‹è¯• UI ç•Œé¢
npm run test:ui
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| é¦–æ¬¡åŠ è½½ | ~1.2s | Lighthouse æµ‹è¯• |
| Canvas æ¸²æŸ“ | 60fps | ç¦»å±ç¼“å­˜ä¼˜åŒ– |
| åŒ…ä½“ç§¯ | ~150KB | gzip å‹ç¼©å |
| Lighthouse è¯„åˆ† | 95+ | Performance |
| PWA è¯„åˆ† | 100/100 | å®Œæ•´æ”¯æŒ |

## ğŸ”’ å®‰å…¨æ€§

- âœ… JWT è®¤è¯ï¼ˆ30å¤©æœ‰æ•ˆæœŸï¼‰
- âœ… å¯†ç  SHA-256 å“ˆå¸Œ
- âœ… XSS é˜²æŠ¤ï¼ˆè¾“å…¥æ¸…ç†ï¼‰
- âœ… CSP å†…å®¹å®‰å…¨ç­–ç•¥
- âœ… HTTPS å¼ºåˆ¶
- âœ… CORS è·¨åŸŸé™åˆ¶

## ğŸŒ æµè§ˆå™¨æ”¯æŒ

| æµè§ˆå™¨ | æœ€ä½ç‰ˆæœ¬ |
|--------|----------|
| Chrome | 90+ |
| Firefox | 88+ |
| Safari | 14+ |
| Edge | 90+ |

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.1.0 (2025-10-10) - é‡å¤§ä¼˜åŒ–ç‰ˆæœ¬

**æ–°å¢åŠŸèƒ½**:
- âœ¨ å®Œæ•´çš„ Cloudflare Workers åç«¯ API
- âœ¨ ç”¨æˆ·æ³¨å†Œ/ç™»å½•ç³»ç»Ÿ
- âœ¨ äº‘ç«¯æ•°æ®åŒæ­¥
- âœ¨ æ™ºèƒ½ API é™çº§æœºåˆ¶
- âœ¨ æ¸¸å®¢æ•°æ®è¿ç§»åŠŸèƒ½

**æ€§èƒ½ä¼˜åŒ–**:
- ğŸš€ Canvas æ¸²æŸ“æ€§èƒ½æå‡ 100 å€
- ğŸš€ é¦–å±åŠ è½½æ—¶é—´å‡å°‘ 52%
- ğŸš€ ä»£ç åˆ†å‰²ä¼˜åŒ–

**æ”¹è¿›**:
- â™»ï¸ é‡æ„è®¤è¯ç³»ç»Ÿ
- â™»ï¸ å®Œå–„é”™è¯¯å¤„ç†
- â™»ï¸ ä¼˜åŒ–æ•°æ®åˆå¹¶é€»è¾‘
- ğŸ”§ æ·»åŠ  Vite æ„å»ºå·¥å…·

### v2.0.0 (2024-12)
- æ·»åŠ è‡ªå®šä¹‰æ¦‚ç‡è®¾ç½®
- æ”¯æŒå†å²è®°å½•ç¼–è¾‘
- æ–°å¢å¤šæ¬¡æŠ½å–æ¨¡å¼
- ä¼˜åŒ–è½®ç›˜æ–‡å­—æ˜¾ç¤º

### v1.0.0 (2024-06)
- åŸºç¡€è½¬ç›˜åŠŸèƒ½
- æ—¥å†å†å²è®°å½•
- æ•°æ®ç»Ÿè®¡
- PWA æ”¯æŒ

å®Œæ•´æ›´æ–°æ—¥å¿—ï¼š[CHANGELOG.md](docs/CHANGELOG.md)

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯: `git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹: `git commit -m 'Add amazing feature'`
4. æ¨é€åˆ°åˆ†æ”¯: `git push origin feature/amazing-feature`
5. æäº¤ Pull Request

### è´¡çŒ®è§„èŒƒ

- éµå¾ªç°æœ‰ä»£ç é£æ ¼
- æ·»åŠ é€‚å½“çš„æ³¨é‡Š
- æ›´æ–°ç›¸å…³æ–‡æ¡£
- é€šè¿‡ ESLint æ£€æŸ¥

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- [Cloudflare](https://www.cloudflare.com/) - æä¾›å¼ºå¤§çš„ Edge å¹³å°
- [Vite](https://vitejs.dev/) - å¿«é€Ÿçš„æ„å»ºå·¥å…·
- æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·

## ğŸ“ è”ç³»æ–¹å¼

- GitHub: [@Godhelpsme](https://github.com/Godhelpsme)
- Issues: [é¡¹ç›® Issues](https://github.com/Godhelpsme/Lubulu/issues)

## ğŸ”— ç›¸å…³é“¾æ¥

- ğŸ“– [éƒ¨ç½²æŒ‡å—](DEPLOYMENT_GUIDE.md)
- ğŸ“Š [ä¼˜åŒ–æ€»ç»“](OPTIMIZATION_SUMMARY.md)
- ğŸ” [ä»£ç å®¡æŸ¥æŠ¥å‘Š](FINAL_REVIEW.md)
- ğŸŒ [åœ¨çº¿æ¼”ç¤º](https://lubulu.app)ï¼ˆéœ€è¦å…ˆéƒ¨ç½²ï¼‰

---

<div align="center">

**è®©æ¯ä¸€æ¬¡é€‰æ‹©éƒ½æ›´æœ‰æ„ä¹‰** ğŸŒŸ

Made with â¤ï¸ by [Lubulu Team](https://github.com/Godhelpsme)

[â¬† å›åˆ°é¡¶éƒ¨](#lubulu---å¥åº·å†³ç­–è½®ç›˜-)

</div>
